// Wait for DOM to be fully loaded
document.addEventListener('DOMContentLoaded', function() {
  // Mobile menu toggle
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');

  if (menuToggle && mobileMenu) {
    menuToggle.addEventListener('click', function() {
      mobileMenu.classList.toggle('show');
      document.body.classList.toggle('menu-open');
    });
  }

  // Dynamic player count animation
  function animatePlayerCounts() {
    const playerCounts = document.querySelectorAll('.players-count');
    
    if (!playerCounts.length) {
      console.warn('No player count elements found');
      return;
    }

    playerCounts.forEach(function(countElement) {
      const min = parseInt(countElement.getAttribute('data-min')) || 100;
      const max = parseInt(countElement.getAttribute('data-max')) || 1000;
      let current = parseInt(countElement.getAttribute('data-current')) || min;
      const numberElement = countElement.querySelector('.player-number');
      
      if (!numberElement) {
        console.warn('No .player-number element found in player count');
        return;
      }

      // Initial display
      numberElement.textContent = current;

      // Function to update count
      function updateCount() {
        // Random change amount (1-10)
        const change = Math.floor(Math.random() * 10) + 1;
        
        // 70% chance to increase, 30% to decrease
        if (Math.random() < 0.7) {
          current = Math.min(max, current + change);
        } else {
          current = Math.max(min, current - change);
        }

        // Animate the change
        animateValue(numberElement, parseInt(numberElement.textContent), current, 1000);
        
        // Schedule next update (2-5 seconds)
        setTimeout(updateCount, Math.random() * 3000 + 2000);
      }

      // Start updates
      setTimeout(updateCount, Math.random() * 3000 + 2000);
    });
  }

  // Helper function to animate number changes
  function animateValue(element, start, end, duration) {
    const startTime = performance.now();
    
    function updateValue(time) {
      const elapsed = time - startTime;
      const progress = Math.min(elapsed / duration, 1);
      element.textContent = Math.floor(progress * (end - start) + start);
      
      if (progress < 1) {
        requestAnimationFrame(updateValue);
      }
    }
    
    requestAnimationFrame(updateValue);
  }

  // Password visibility toggle
  document.querySelectorAll('.toggle-password').forEach(function(toggle) {
    toggle.addEventListener('click', function() {
      const input = this.parentElement.querySelector('input');
      if (input) {
        const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
        input.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
      }
    });
  });

  // Close mobile menu when clicking on a link
  document.querySelectorAll('.nav a').forEach(function(link) {
    link.addEventListener('click', function() {
      if (mobileMenu) mobileMenu.classList.remove('show');
      document.body.classList.remove('menu-open');
    });
  });

  // Initialize player counts
  animatePlayerCounts();
});





